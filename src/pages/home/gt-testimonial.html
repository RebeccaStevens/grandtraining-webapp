<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/html-echo/html-echo.html">

<link rel="import" href="../../../styles/gt-styles.html">
<link rel="import" href="../../../imports/gt.html">
<link rel="import" href="../../gt-element-common-behavior.html">

<dom-module id="gt-testimonial">
  <template>
    <style include="gt-styles">
      :host {
        display: block;
      }
      .content {
        font-style: italic;
      }
      .by {
        font-size: var(--app-small-text-font-size);
        text-align: right;
        margin-top: 0.25em;
      }
      .by .name {
        font-weight: bold;
      }
    </style>

    <html-echo class="content" html="[[content]]"></html-echo>
    <div class="by"><span class="name">[[by]]</span>, <span class="date">[[_getFormattedDate(_dateAsDateObject)]]</span></div>
  </template>

  <script>
    Polymer({
      is: 'gt-testimonial',

      behaviors: [
        GT.ElementCommonBehavior
      ],

      properties: {

        /**
         * The testimonial's content as html.
         */
        content: String,

        /**
         * The name of the person who wrote the testimonial.
         */
        by: String,

        /**
         * The date the testimonial was written.
         */
        date: String,

        /**
         * The date given as a Date object.
         */
        _dateAsDateObject: {
          type: Date,
          computed: '_createDateObject(date)'
        }
      },

      /**
       * Creates a Date object from the given date string.
       */
      _createDateObject: function(dateString) {
        return new Date(dateString);
      },

      /**
       * Get the date formatted to be displayed.
       */
      _getFormattedDate: function(date) {
        return date.getFullYear();
      }
    });
  </script>
</dom-module>
