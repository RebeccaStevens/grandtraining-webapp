<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../imports/gt.html">
<link rel="import" href="redux-store.html">

<script>

  var ElementCommonBehaviorImpl = {

    actions: {
      setIDToken: function(idToken) {
        return {
          type: 'SET_ID_TOKEN',
          idToken: idToken
        };
      },

      setVenue: function(venue) {
        return {
          type: 'SET_VENUE',
          venue: venue
        };
      },

      setPageLoading: function(loading) {
        return {
          type: 'SET_PAGE_LOADING',
          loading: loading
        };
      },

      setPageError: function(error) {
        return {
          type: 'SET_PAGE_ERROR',
          error: error
        };
      },

      signIn: function(user) {
        return {
          type: 'SIGN_IN',
          user: user
        };
      },

      signOut: function() {
        return {
          type: 'SIGN_OUT'
        };
      }
    },

    properties: {
      idToken: {
        type: String,
        statePath: 'idToken'
      }
    },

    /**
     * Get a url path to the api for the relative path given.
     *
     * @param {!String} path
     * @returns {String}
     */
    getApiUrl: function(path) {
      return GT.ReduxBehavior.getState().apiPath + path;
    },

    /**
     * Returns true if the array has any values.
     *
     * @param {Array} arr
     * @returns {Boolean}
     */
    doesArrayHaveValues: function(arr) {
      return arr && arr.length > 0;
    },

    /**
     * Returns true if the value is not undefined or null.
     *
     * @param {*} val
     * @returns {Boolean}
     */
    isDefined: function(val) {
      return val !== undefined && val !== null;
    },

    /**
     * Create a deep clone of the given object.
     *
     * @param {Object} obj - The object to clone
     * @returns {Object} - A deep clone of the object
     */
    cloneObject: function(obj) {
      return JSON.parse(JSON.stringify(obj));
    }
  };

  GT.ElementCommonBehavior = [GT.ReduxBehavior, ElementCommonBehaviorImpl]
</script>
